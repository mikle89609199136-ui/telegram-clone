<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zhuravlev Telegram v10.5</title>
    <style>
        /* === –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –¢–ï–ú–´ === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            --bg-color: #0e1621;
            --surface-color: #17212b;
            --border-color: #2b3b4a;
            --text-primary: #fff;
            --text-secondary: #8e9eae;
            --accent-color: #2ea6ff;
            --message-own: #2ea6ff;
            --message-other: #17212b;
            --message-other-text: #fff;
            --chat-bg: #0e1621;
            background-color: var(--bg-color);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: background 0.3s, color 0.3s;
        }

        body.light-theme {
            --bg-color: #f5f5f5;
            --surface-color: #ffffff;
            --border-color: #e0e0e0;
            --text-primary: #000000;
            --text-secondary: #5e6f7e;
            --message-other: #e4e6eb;
            --message-other-text: #000;
            --chat-bg: #f5f5f5;
        }

        body.blue-theme {
            --bg-color: #1a2b3c;
            --surface-color: #1e3a5f;
            --border-color: #2c4a6e;
            --accent-color: #64b5f6;
            --message-own: #64b5f6;
            --message-other: #1e3a5f;
            --chat-bg: #1a2b3c;
        }

        body.green-theme {
            --bg-color: #1a2e1a;
            --surface-color: #1f4a2c;
            --border-color: #2a5e3a;
            --accent-color: #81c784;
            --message-own: #81c784;
            --message-other: #1f4a2c;
            --chat-bg: #1a2e1a;
        }

        body.purple-theme {
            --bg-color: #1e1a2e;
            --surface-color: #312a4a;
            --border-color: #453c63;
            --accent-color: #b39ddb;
            --message-own: #b39ddb;
            --message-other: #312a4a;
            --chat-bg: #1e1a2e;
        }

        body.wallpaper-default { --chat-bg: var(--bg-color); }
        body.wallpaper-light { --chat-bg: #e0e0e0; }
        body.wallpaper-dark { --chat-bg: #0a0a0a; }
        body.wallpaper-gradient { --chat-bg: linear-gradient(145deg, #1e3a5f, #0e1621); }
        body.wallpaper-pattern { --chat-bg: repeating-linear-gradient(45deg, #2b3b4a 0px, #2b3b4a 2px, #17212b 2px, #17212b 8px); }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }

        #app { height: 100%; display: flex; flex-direction: column; position: relative; }
        .screen { display: none; height: 100%; flex-direction: column; background: var(--bg-color); animation: slideIn 0.3s ease; }
        .screen.active { display: flex; }

        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pop { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* –ü–ö –≤–µ—Ä—Å–∏—è */
        body.pc-mode #main-screen.active {
            display: grid;
            grid-template-columns: 350px 1fr;
            grid-template-rows: auto auto auto 1fr auto;
            grid-template-areas:
                "top-bar top-bar"
                "search-box search-box"
                "folders folders"
                "content-area chat-panel"
                "bottom-nav chat-panel";
        }
        body.pc-mode #main-screen.active #top-bar { grid-area: top-bar; }
        body.pc-mode #main-screen.active #search-box { grid-area: search-box; }
        body.pc-mode #main-screen.active #folders-row { grid-area: folders; }
        body.pc-mode #main-screen.active #content-area { grid-area: content-area; overflow-y: auto; }
        body.pc-mode #main-screen.active .bottom-nav { grid-area: bottom-nav; }
        body.pc-mode #main-screen.active #chat-panel {
            grid-area: chat-panel;
            background: var(--surface-color);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è */
        body.mobile-mode .bottom-nav { display: flex; }
        body.mobile-mode #chat-panel { display: none; }
        body.mobile-mode #main-screen.active { display: flex; flex-direction: column; }
        body.mobile-mode .folders-row { padding: 4px 8px; }
        body.mobile-mode .chat-item { padding: 8px 12px; }
        body.mobile-mode .chat-avatar { width: 48px; height: 48px; font-size: 20px; }
        body.mobile-mode .top-bar { padding: 8px 12px; }
        body.mobile-mode .bottom-nav { padding: 4px 0; }

        .top-bar {
            background: var(--surface-color);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        .top-bar h1 { flex: 1; font-size: 20px; font-weight: 600; }
        .top-bar .edit-btn, .top-bar .create-btn, .top-bar .back-btn {
            background: none; border: none; color: var(--accent-color);
            font-size: 16px; margin-right: 16px; cursor: pointer;
        }
        .top-bar .back-btn { font-size: 24px; margin-right: 12px; }
        .top-bar .create-btn { font-size: 24px; }

        .search-box { padding: 8px 16px; background: var(--surface-color); }
        .search-box input {
            width: 100%; padding: 12px 18px; background: var(--border-color);
            border: none; border-radius: 24px; color: var(--text-primary); outline: none;
        }
        .search-box input::placeholder { color: var(--text-secondary); }

        .bottom-nav {
            display: flex; background: var(--surface-color);
            border-top: 1px solid var(--border-color); padding: 8px 0;
        }
        .nav-item {
            flex: 1; text-align: center; color: var(--text-secondary);
            font-size: 12px; padding: 8px; cursor: pointer;
        }
        .nav-item.active { color: var(--accent-color); }
        .nav-item i { display: block; font-size: 24px; margin-bottom: 4px; }

        .folders-row {
            display: flex; gap: 8px; padding: 8px 16px;
            background: var(--surface-color); border-bottom: 1px solid var(--border-color);
            overflow-x: auto; white-space: nowrap;
        }
        .folder-chip {
            padding: 6px 12px; background: var(--bg-color);
            border: 1px solid var(--border-color); border-radius: 20px;
            cursor: pointer; transition: 0.2s;
        }
        .folder-chip.active { background: var(--accent-color); color: #fff; border-color: var(--accent-color); }

        .chats-list, .contacts-list, .participant-list {
            flex: 1; overflow-y: auto; padding: 0;
        }
        .chat-item, .contact-item, .participant-item {
            display: flex; align-items: center; padding: 12px 16px;
            background: var(--bg-color); border-bottom: 1px solid var(--border-color);
            cursor: pointer; transition: background 0.2s; position: relative;
            animation: fadeIn 0.2s;
        }
        .chat-item:hover, .contact-item:hover, .participant-item:hover { background: var(--surface-color); }
        .chat-item.pinned { background: var(--surface-color); border-left: 4px solid var(--accent-color); }

        .chat-avatar {
            width: 54px; height: 54px; border-radius: 50%;
            background: var(--accent-color); display: flex; align-items: center;
            justify-content: center; font-size: 24px; color: #fff;
            margin-right: 12px; flex-shrink: 0; object-fit: cover;
            position: relative;
        }
        .chat-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        .online-indicator {
            position: absolute; bottom: 2px; right: 2px;
            width: 14px; height: 14px; background: #4caf50;
            border: 2px solid var(--surface-color); border-radius: 50%;
        }

        .chat-info { flex: 1; min-width: 0; }
        .chat-name { font-weight: 600; margin-bottom: 4px; display: flex; align-items: center; gap: 4px; }
        .chat-username { color: var(--text-secondary); font-size: 14px; }
        .chat-last-msg { color: var(--text-secondary); font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .chat-meta { text-align: right; font-size: 12px; color: var(--text-secondary); }
        .chat-time { margin-bottom: 4px; }
        .chat-unread { background: var(--accent-color); color: #fff; border-radius: 12px; padding: 2px 6px; font-size: 10px; }
        .chat-pin { color: var(--accent-color); font-size: 12px; margin-right: 4px; }
        .folder-tag {
            display: inline-block; width: 8px; height: 8px; border-radius: 50%;
            margin-right: 2px;
        }

        .edit-bar {
            background: var(--surface-color); padding: 12px 16px;
            display: flex; align-items: center; border-bottom: 1px solid var(--border-color);
        }
        .edit-counter { flex: 1; font-weight: 600; }
        .edit-actions button {
            background: none; border: none; color: var(--accent-color);
            font-size: 16px; margin-left: 16px; cursor: pointer;
        }

        .chat-window { display: flex; flex-direction: column; height: 100%; background: var(--chat-bg); }
        .chat-header {
            background: var(--surface-color); padding: 12px 16px;
            display: flex; align-items: center; border-bottom: 1px solid var(--border-color);
            cursor: pointer; position: relative;
        }
        .back-btn { background: none; border: none; color: var(--accent-color); font-size: 24px; margin-right: 12px; cursor: pointer; }
        .chat-header-info { flex: 1; }
        .chat-header-name { font-weight: 600; }
        .chat-header-status { font-size: 12px; color: var(--text-secondary); }
        .chat-menu {
            position: absolute; top: 60px; right: 10px; background: var(--surface-color);
            border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); z-index: 1000;
            min-width: 200px; display: none; animation: pop 0.1s;
        }
        .chat-menu-item {
            padding: 12px 16px; cursor: pointer; border-bottom: 1px solid var(--border-color);
        }
        .chat-menu-item:last-child { border-bottom: none; }
        .chat-menu-item:hover { background: var(--border-color); }

        .messages-area { flex: 1; overflow-y: auto; padding: 16px; display: flex; flex-direction: column; }
        .message {
            max-width: 80%; margin-bottom: 12px; display: flex; flex-direction: column;
            position: relative; animation: pop 0.15s ease-out;
        }
        .message.own { align-self: flex-end; }
        .message-header {
            display: flex; align-items: center; gap: 6px; margin-bottom: 2px;
            font-size: 13px; cursor: pointer;
        }
        .message-sender-avatar {
            width: 20px; height: 20px; border-radius: 50%;
            background: var(--accent-color); display: flex; align-items: center;
            justify-content: center; font-size: 10px; color: #fff;
        }
        .message-sender-name { color: var(--accent-color); font-weight: 500; }
        .message-bubble {
            background: var(--message-other); border-radius: 18px;
            padding: 8px 12px; color: var(--message-other-text); word-wrap: break-word;
        }
        .message.own .message-bubble { background: var(--message-own); color: #fff; }
        .message-time { font-size: 10px; color: var(--text-secondary); margin-top: 2px; align-self: flex-end; }
        .message.own .message-time { color: var(--accent-color); }

        .message-reactions {
            display: flex; gap: 4px; margin-top: 2px; justify-content: flex-end;
        }
        .reaction {
            background: var(--surface-color); border-radius: 12px;
            padding: 2px 6px; font-size: 12px; display: flex; align-items: center; gap: 2px;
            cursor: pointer;
        }

        .file-message { display: flex; align-items: center; gap: 8px; }
        .file-icon { font-size: 24px; }
        .media-preview { max-width: 200px; max-height: 200px; border-radius: 12px; cursor: pointer; transition: transform 0.2s; }
        .media-preview:hover { transform: scale(1.02); }
        .voice-message { display: flex; align-items: center; gap: 8px; }
        .voice-circle {
            width: 40px; height: 40px; border-radius: 50%;
            background: var(--accent-color); display: flex; align-items: center;
            justify-content: center; color: #fff; cursor: pointer;
        }

        .message-context-menu {
            position: absolute; background: var(--surface-color); border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5); z-index: 1000;
            min-width: 200px; display: none; animation: pop 0.1s;
        }
        .message-context-item {
            padding: 12px 16px; cursor: pointer; border-bottom: 1px solid var(--border-color);
            display: flex; align-items: center; gap: 8px;
        }
        .message-context-item:last-child { border-bottom: none; }
        .message-context-item:hover { background: var(--border-color); }

        .reactions-scroll {
            display: flex; overflow-x: auto; gap: 8px; padding: 8px;
            background: var(--surface-color); border-radius: 12px;
        }
        .reaction-option {
            font-size: 24px; cursor: pointer; padding: 4px;
        }

        .input-area {
            background: var(--surface-color); padding: 12px 16px;
            display: flex; align-items: center; border-top: 1px solid var(--border-color);
        }
        .attach-btn { background: none; border: none; font-size: 24px; color: var(--text-secondary); margin-right: 12px; cursor: pointer; }
        .input-wrapper {
            flex: 1; background: var(--border-color); border-radius: 24px;
            padding: 8px 16px; display: flex; align-items: center;
        }
        .input-wrapper input {
            flex: 1; background: transparent; border: none; color: var(--text-primary);
            outline: none; font-size: 16px;
        }
        .input-wrapper input::placeholder { color: var(--text-secondary); }
        .emoji-btn, .voice-btn, .send-btn {
            background: none; border: none; font-size: 22px; color: var(--text-secondary);
            margin-left: 8px; cursor: pointer; transition: transform 0.1s;
        }
        .emoji-btn:hover, .voice-btn:hover, .send-btn:hover { transform: scale(1.1); }
        .send-btn { color: var(--accent-color); }

        #file-input { display: none; }

        .emoji-picker {
            position: absolute; bottom: 80px; right: 16px;
            background: var(--surface-color); border-radius: 24px; padding: 12px;
            display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px;
            z-index: 1000; box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            max-height: 300px; overflow-y: auto; animation: pop 0.2s;
        }
        .emoji-item { font-size: 24px; cursor: pointer; text-align: center; transition: transform 0.1s; }
        .emoji-item:hover { transform: scale(1.2); }

        .attach-menu {
            position: absolute; bottom: 80px; left: 16px;
            background: var(--surface-color); border-radius: 24px; padding: 12px;
            display: flex; flex-direction: column; gap: 8px;
            z-index: 1000; box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            animation: pop 0.2s;
        }
        .attach-menu-item {
            padding: 8px 16px; cursor: pointer; display: flex; align-items: center; gap: 8px;
        }
        .attach-menu-item:hover { background: var(--border-color); border-radius: 12px; }

        .poll-screen {
            padding: 16px;
        }
        .poll-screen input, .poll-screen textarea {
            width: 100%; padding: 12px; margin-bottom: 16px;
            background: var(--surface-color); border: 1px solid var(--border-color);
            border-radius: 12px; color: var(--text-primary);
        }
        .poll-screen label { display: block; margin-bottom: 8px; }

        .profile-header {
            display: flex; flex-direction: column; align-items: center;
            padding: 24px 16px; background: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
        }
        .profile-avatar {
            width: 100px; height: 100px; border-radius: 50%;
            background: var(--accent-color); display: flex; align-items: center;
            justify-content: center; font-size: 40px; color: #fff;
            margin-bottom: 16px; cursor: pointer; object-fit: cover; position: relative;
        }
        .profile-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        .profile-name { font-size: 24px; font-weight: 600; }
        .profile-username { font-size: 16px; color: var(--text-secondary); margin-bottom: 8px; }
        .profile-birthday { font-size: 14px; color: var(--text-secondary); }
        .profile-section { padding: 16px; border-bottom: 1px solid var(--border-color); }
        .profile-section-title { font-weight: 600; margin-bottom: 8px; }
        .profile-media {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px;
        }
        .profile-media-item {
            background: var(--surface-color); border-radius: 8px; padding: 8px;
            text-align: center; font-size: 12px; cursor: pointer;
        }
        .profile-action {
            padding: 12px 16px; background: var(--surface-color); border-radius: 12px;
            margin-bottom: 8px; cursor: pointer; display: flex; justify-content: space-between;
        }

        .settings-list { flex: 1; overflow-y: auto; padding: 16px; }
        .settings-item {
            display: flex; align-items: center; padding: 16px;
            background: var(--surface-color); border-radius: 12px;
            margin-bottom: 8px; cursor: pointer;
        }
        .settings-icon { font-size: 24px; margin-right: 16px; }
        .settings-content { flex: 1; }
        .settings-title { font-weight: 600; }
        .settings-subtitle { font-size: 12px; color: var(--text-secondary); }
        .settings-value { color: var(--accent-color); }

        .folder-item {
            display: flex; align-items: center; padding: 12px 16px;
            background: var(--surface-color); border-radius: 12px;
            margin-bottom: 8px; cursor: pointer;
        }
        .folder-name { flex: 1; font-weight: 600; }
        .folder-count { color: var(--text-secondary); }
        .folder-color {
            width: 12px; height: 12px; border-radius: 50%; margin-right: 8px;
        }
        .folder-color.black { background: #000; }
        .folder-color.white { background: #fff; border: 1px solid #ccc; }
        .folder-color.yellow { background: #ff0; }
        .folder-color.red { background: #f00; }
        .folder-color.blue { background: #00f; }
        .folder-color.green { background: #0f0; }
        .folder-color.orange { background: #ffa500; }

        .color-picker { display: flex; gap: 8px; margin: 16px 0; }
        .color-option {
            width: 40px; height: 40px; border-radius: 50%; cursor: pointer;
            border: 2px solid transparent;
        }
        .color-option.selected { border-color: var(--accent-color); }

        .theme-option, .lang-option {
            padding: 12px 16px; background: var(--surface-color); border-radius: 12px;
            margin-bottom: 8px; cursor: pointer; text-align: center;
        }
        .theme-option.active, .lang-option.active { border: 2px solid var(--accent-color); }

        .privacy-item {
            display: flex; align-items: center; justify-content: space-between;
            padding: 12px 16px; background: var(--surface-color); border-radius: 12px;
            margin-bottom: 8px; cursor: pointer;
        }
        .privacy-value { color: var(--accent-color); }

        .device-item {
            display: flex; align-items: center; padding: 12px 16px;
            background: var(--surface-color); border-radius: 12px;
            margin-bottom: 8px; cursor: pointer;
        }
        .device-icon { font-size: 24px; margin-right: 16px; }
        .device-info { flex: 1; }
        .device-name { font-weight: 600; }
        .device-detail { font-size: 12px; color: var(--text-secondary); }

        #auth-screen {
            background: linear-gradient(145deg, #1f2b38, #0e1621);
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .auth-card {
            background: var(--surface-color);
            border-radius: 24px;
            padding: 32px 24px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            animation: pop 0.3s;
            text-align: center;
        }
        .auth-avatar {
            font-size: 80px;
            margin-bottom: 16px;
        }
        .auth-title {
            font-size: 28px;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 32px;
        }
        .auth-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .auth-btn {
            padding: 16px;
            border: none;
            border-radius: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        .auth-btn.register {
            background: var(--accent-color);
            color: #fff;
            font-size: 18px;
        }
        .auth-btn.login {
            background: var(--surface-color);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
            font-size: 16px;
        }
        .auth-form {
            display: none;
            text-align: left;
        }
        .auth-form.active {
            display: block;
        }
        .auth-form h2 {
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        .auth-form input {
            width: 100%;
            padding: 16px;
            margin-bottom: 16px;
            background: var(--border-color);
            border: none;
            border-radius: 14px;
            color: var(--text-primary);
            outline: none;
        }
        .auth-form button {
            width: 100%;
            padding: 16px;
            background: var(--accent-color);
            border: none;
            border-radius: 14px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
        }
        .back-link {
            display: inline-block;
            margin-top: 16px;
            color: var(--accent-color);
            cursor: pointer;
        }

        .media-modal {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.9); display: flex; align-items: center;
            justify-content: center; z-index: 2000; cursor: pointer;
        }
        .media-modal img, .media-modal video {
            max-width: 90%; max-height: 90%;
        }

        .next-btn {
            width: 56px; height: 56px; border-radius: 50%;
            background: var(--accent-color); border: none;
            color: #fff; font-size: 24px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            margin: 16px auto; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5); display: none; align-items: center;
            justify-content: center; z-index: 3000; animation: fadeIn 0.2s;
        }
        .modal {
            background: var(--surface-color); border-radius: 24px;
            padding: 24px; max-width: 400px; width: 90%; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: pop 0.2s;
        }
        .modal-title { font-size: 20px; font-weight: 600; margin-bottom: 16px; }
        .modal-content { margin-bottom: 24px; }
        .modal-input {
            width: 100%; padding: 12px; background: var(--border-color);
            border: none; border-radius: 12px; color: var(--text-primary);
            margin-bottom: 16px;
        }
        .modal-buttons { display: flex; gap: 12px; justify-content: flex-end; }
        .modal-btn {
            padding: 10px 20px; border: none; border-radius: 12px;
            cursor: pointer; font-weight: 600; transition: opacity 0.2s;
        }
        .modal-btn.cancel { background: var(--border-color); color: var(--text-primary); }
        .modal-btn.confirm { background: var(--accent-color); color: #fff; }
        .modal-btn:hover { opacity: 0.8; }

        #recent-chats-sidebar {
            position: fixed; left: 0; top: 0; bottom: 0; width: 80px;
            background: var(--surface-color); border-right: 1px solid var(--border-color);
            overflow-y: auto; display: flex; flex-direction: column; align-items: center;
            padding: 8px 0; z-index: 100;
        }
        .recent-chat-avatar {
            width: 50px; height: 50px; border-radius: 50%;
            background: var(--accent-color); margin: 8px 0;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: transform 0.2s; position: relative;
        }
        .recent-chat-avatar:hover { transform: scale(1.1); }

        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–æ–Ω –¥–ª—è —á–∞—Ç–∞ (Telegram-like) */
        .chat-window {
            background: linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.3) 100%), url('https://i.pinimg.com/736x/47/40/ab/4740ab66a0debcc7142715f529e3310b.jpg') center/cover fixed;
        }
    </style>
</head>
<body>
<div id="app">
    <!-- –≠–∫—Ä–∞–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <div id="auth-screen" class="screen active">
        <div class="auth-card">
            <div class="auth-avatar">üïäÔ∏è</div>
            <div class="auth-title">Zhuravlev Telegram</div>
            <div id="auth-buttons" class="auth-buttons">
                <button class="auth-btn register" onclick="showRegisterForm()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                <button class="auth-btn login" onclick="showLoginForm()">–í—Ö–æ–¥</button>
            </div>
            <div id="register-form" class="auth-form">
                <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <input type="text" id="reg-username" placeholder="–Æ–∑–µ—Ä–Ω–µ–π–º (–±–µ–∑ @)">
                <input type="password" id="reg-password" placeholder="–ü–∞—Ä–æ–ª—å">
                <input type="password" id="reg-password2" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                <button onclick="register()">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                <div class="back-link" onclick="showAuthButtons()">‚Üê –ù–∞–∑–∞–¥</div>
            </div>
            <div id="login-form" class="auth-form">
                <h2>–í—Ö–æ–¥</h2>
                <input type="text" id="login-username" placeholder="–Æ–∑–µ—Ä–Ω–µ–π–º">
                <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å">
                <button onclick="login()">–í–æ–π—Ç–∏</button>
                <div class="back-link" onclick="showAuthButtons()">‚Üê –ù–∞–∑–∞–¥</div>
            </div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞) -->
    <div id="main-screen" class="screen">
        <div class="top-bar" id="top-bar">
            <h1 id="screen-title">–ß–∞—Ç—ã</h1>
            <button class="edit-btn" id="edit-btn" onclick="toggleEditMode()">–ò–∑–º.</button>
            <button class="create-btn" id="create-btn" onclick="showCreateGroupType()">üìù</button>
        </div>
        <div class="search-box" id="search-box">
            <input type="text" id="global-search" placeholder="–ü–æ–∏—Å–∫..." oninput="globalSearch()">
        </div>
        <div id="folders-row" class="folders-row"></div>
        <div id="edit-bar" class="edit-bar" style="display: none;">
            <div class="edit-counter" id="edit-counter">0 –≤—ã–±—Ä–∞–Ω–æ</div>
            <div class="edit-actions">
                <button onclick="deleteSelectedChats()">–£–¥–∞–ª–∏—Ç—å</button>
                <button onclick="pinSelectedChats()">–ó–∞–∫—Ä–µ–ø–∏—Ç—å</button>
                <button onclick="addToFolder()">–í –ø–∞–ø–∫—É</button>
                <button onclick="doneEditMode()">–ì–æ—Ç–æ–≤–æ</button>
            </div>
        </div>
        <div id="content-area" style="flex: 1; overflow-y: auto;">
            <div id="chats-view" class="view active"><div class="chats-list" id="chats-list"></div></div>
            <div id="contacts-view" class="view" style="display: none;"><div class="contacts-list" id="contacts-list"></div></div>
            <div id="settings-view" class="view" style="display: none;">
                <div class="settings-list">
                    <div class="settings-item" onclick="showProfile('me')">
                        <div class="settings-icon">üë§</div>
                        <div class="settings-content">
                            <div class="settings-title">–ü—Ä–æ—Ñ–∏–ª—å</div>
                            <div class="settings-subtitle">–ò–º—è, –∞–≤–∞—Ç–∞—Ä, –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</div>
                        </div>
                    </div>
                    <div class="settings-item" onclick="showThemes()">
                        <div class="settings-icon">üé®</div>
                        <div class="settings-content">
                            <div class="settings-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</div>
                            <div class="settings-subtitle">–¢–µ–º—ã, –æ–±–æ–∏, —Ä–µ–∂–∏–º</div>
                        </div>
                        <div class="settings-value" id="current-theme">–¢—ë–º–Ω–∞—è</div>
                    </div>
                    <div class="settings-item" onclick="showPrivacy()">
                        <div class="settings-icon">üîí</div>
                        <div class="settings-content">
                            <div class="settings-title">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</div>
                            <div class="settings-subtitle">–ö—Ç–æ –≤–∏–¥–∏—Ç –Ω–æ–º–µ—Ä, —Ñ–æ—Ç–æ</div>
                        </div>
                    </div>
                    <div class="settings-item" onclick="showDevices()">
                        <div class="settings-icon">üì±</div>
                        <div class="settings-content">
                            <div class="settings-title">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
                            <div class="settings-subtitle">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–∞–Ω—Å—ã</div>
                        </div>
                    </div>
                    <div class="settings-item" onclick="showFolders()">
                        <div class="settings-icon">üìÅ</div>
                        <div class="settings-content">
                            <div class="settings-title">–ü–∞–ø–∫–∏ —Å —á–∞—Ç–∞–º–∏</div>
                            <div class="settings-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∞–º–∏</div>
                        </div>
                    </div>
                    <div class="settings-item" onclick="showLanguage()">
                        <div class="settings-icon">üåê</div>
                        <div class="settings-content">
                            <div class="settings-title">–Ø–∑—ã–∫</div>
                            <div class="settings-subtitle">–†—É—Å—Å–∫–∏–π / English</div>
                        </div>
                        <div class="settings-value" id="current-lang">–†—É—Å—Å–∫–∏–π</div>
                    </div>
                    <div class="settings-item" onclick="showAbout()">
                        <div class="settings-icon">‚ÑπÔ∏è</div>
                        <div class="settings-content">
                            <div class="settings-title">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
                            <div class="settings-subtitle">–í–µ—Ä—Å–∏—è 10.5</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="chat-panel" style="display: none; flex-direction: column;">
            <div class="chat-header" onclick="openChatInfo()">
                <div class="chat-header-info">
                    <div class="chat-header-name" id="pc-chat-header-name">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</div>
                    <div class="chat-header-status" id="pc-chat-header-status"></div>
                </div>
                <button class="edit-btn" onclick="event.stopPropagation(); toggleChatMenu()">‚ãÆ</button>
                <div class="chat-menu" id="pc-chat-menu"></div>
            </div>
            <div class="messages-area" id="pc-messages-area"></div>
            <div class="input-area">
                <button class="attach-btn" onclick="toggleAttachMenu()">üìé</button>
                <div class="input-wrapper">
                    <input type="text" id="pc-message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ" oninput="handleTyping(true)" onkeypress="handleEnterKey(event, true)">
                    <button class="emoji-btn" onclick="toggleEmojiPicker(true)">üòÄ</button>
                    <button class="voice-btn" id="pc-send-btn" onclick="sendMessage(true)">üé§</button>
                </div>
            </div>
        </div>
        <div class="bottom-nav">
            <div class="nav-item active" data-view="chats" onclick="switchMainView('chats')"><i>üí¨</i><span>–ß–∞—Ç—ã</span></div>
            <div class="nav-item" data-view="contacts" onclick="switchMainView('contacts')"><i>üë•</i><span>–ö–æ–Ω—Ç–∞–∫—Ç—ã</span></div>
            <div class="nav-item" data-view="settings" onclick="switchMainView('settings')"><i>‚öôÔ∏è</i><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
        </div>
    </div>

    <!-- –û–∫–Ω–æ —á–∞—Ç–∞ (–º–æ–±–∏–ª—å–Ω–æ–µ) -->
    <div id="chat-window" class="screen">
        <div class="chat-header" onclick="openChatInfo()">
            <button class="back-btn" onclick="event.stopPropagation(); closeChat()">‚Üê</button>
            <div class="chat-header-info">
                <div class="chat-header-name" id="chat-header-name"></div>
                <div class="chat-header-status" id="chat-header-status">–æ–Ω–ª–∞–π–Ω</div>
            </div>
            <button class="edit-btn" style="margin-right: 0;" onclick="event.stopPropagation(); toggleChatMenu()">‚ãÆ</button>
            <div class="chat-menu" id="chat-menu"></div>
        </div>
        <div class="messages-area" id="messages-area"></div>
        <div class="input-area">
            <button class="attach-btn" onclick="toggleAttachMenu()">üìé</button>
            <div class="input-wrapper">
                <input type="text" id="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ" oninput="handleTyping(false)" onkeypress="handleEnterKey(event, false)">
                <button class="emoji-btn" onclick="toggleEmojiPicker(false)">üòÄ</button>
                <button class="voice-btn" id="send-btn" onclick="sendMessage(false)">üé§</button>
            </div>
        </div>
        <input type="file" id="file-input" onchange="uploadFile()" style="display: none;">
        <div id="emoji-picker" class="emoji-picker" style="display: none;"></div>
        <div id="attach-menu" class="attach-menu" style="display: none;">
            <div class="attach-menu-item" onclick="attachPhoto()">üì∑ –§–æ—Ç–æ</div>
            <div class="attach-menu-item" onclick="attachVideo()">üé• –í–∏–¥–µ–æ</div>
            <div class="attach-menu-item" onclick="attachFile()">üìé –§–∞–π–ª</div>
            <div class="attach-menu-item" onclick="showPollScreen()">üìä –û–ø—Ä–æ—Å</div>
            <div class="attach-menu-item" onclick="attachVoice()">üé§ –ì–æ–ª–æ—Å–æ–≤–æ–µ</div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–∞ -->
    <div id="poll-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hidePollScreen()">‚Üê</button>
            <h1>–°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</h1>
            <button class="create-btn" onclick="createPoll()">–ì–æ—Ç–æ–≤–æ</button>
        </div>
        <div class="poll-screen" style="flex:1; overflow-y: auto;">
            <input type="text" id="poll-question" placeholder="–í–æ–ø—Ä–æ—Å">
            <div id="poll-options">
                <input type="text" id="poll-opt1" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 1">
                <input type="text" id="poll-opt2" placeholder="–í–∞—Ä–∏–∞–Ω—Ç 2">
            </div>
            <button onclick="addPollOption()">+ –î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç</button>
            <label><input type="checkbox" id="poll-multiple"> –ù–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç–æ–≤</label>
            <label><input type="checkbox" id="poll-quiz"> –†–µ–∂–∏–º –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</label>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —Å–æ–æ–±—â–µ–Ω–∏—è -->
    <div id="message-context-menu" class="message-context-menu" style="display: none;">
        <div class="reactions-scroll" id="reaction-scroll">
            <span class="reaction-option" onclick="contextReact('üëç')">üëç</span>
            <span class="reaction-option" onclick="contextReact('‚ù§Ô∏è')">‚ù§Ô∏è</span>
            <span class="reaction-option" onclick="contextReact('üòÆ')">üòÆ</span>
            <span class="reaction-option" onclick="contextReact('üò¢')">üò¢</span>
            <span class="reaction-option" onclick="contextReact('üò°')">üò°</span>
            <span class="reaction-option" onclick="contextReact('üéâ')">üéâ</span>
        </div>
        <div class="message-context-item" onclick="contextReply()">‚Ü©Ô∏è –û—Ç–≤–µ—Ç–∏—Ç—å</div>
        <div class="message-context-item" onclick="contextForward()">‚û°Ô∏è –ü–µ—Ä–µ—Å–ª–∞—Ç—å</div>
        <div class="message-context-item" onclick="contextCopy()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</div>
        <div class="message-context-item" onclick="contextDelete()">‚ùå –£–¥–∞–ª–∏—Ç—å</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª–∞ (—à–∞–≥ 1: –≤—ã–±–æ—Ä —Ç–∏–ø–∞) -->
    <div id="create-group-type-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideCreateGroupType()">‚Üê</button>
            <h1>–°–æ–∑–¥–∞—Ç—å</h1>
        </div>
        <div style="flex:1; overflow-y: auto; padding: 16px;">
            <div class="settings-item" onclick="startCreateGroup('channel')">
                <div class="settings-icon">üì¢</div>
                <div class="settings-content">
                    <div class="settings-title">–ö–∞–Ω–∞–ª</div>
                    <div class="settings-subtitle">–ü—É–±–ª–∏—á–Ω—ã–π –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª</div>
                </div>
            </div>
            <div class="settings-item" onclick="startCreateGroup('group')">
                <div class="settings-icon">üë•</div>
                <div class="settings-content">
                    <div class="settings-title">–ì—Ä—É–ø–ø–∞</div>
                    <div class="settings-subtitle">–û–±—â–∞–π—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è (—à–∞–≥ 2: —É—á–∞—Å—Ç–Ω–∏–∫–∏) -->
    <div id="create-group-members-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideCreateGroupMembers()">‚Üê</button>
            <h1>–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</h1>
            <button class="next-btn" onclick="nextCreateGroupStep()">‚û°Ô∏è</button>
        </div>
        <div class="participant-list" id="create-group-members-list"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è (—à–∞–≥ 3: –¥–µ—Ç–∞–ª–∏) -->
    <div id="create-group-detail-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="prevCreateGroupStep()">‚Üê</button>
            <h1 id="create-group-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
            <button class="next-btn" onclick="createGroupFinal()">‚úÖ</button>
        </div>
        <div style="flex:1; overflow-y: auto; padding: 16px;">
            <div style="text-align:center; margin-bottom:24px;">
                <div class="profile-avatar" id="create-group-avatar" onclick="chooseGroupAvatar()">üì∑</div>
                <button class="btn-secondary" onclick="chooseGroupAvatarEmoji()">–í—ã–±—Ä–∞—Ç—å —ç–º–æ–¥–∑–∏</button>
                <button class="btn-secondary" onclick="uploadGroupAvatar()">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</button>
            </div>
            <input type="text" id="create-group-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" style="width:100%; padding:12px; background:var(--surface-color); border:1px solid var(--border-color); border-radius:12px; color:var(--text-primary); margin-bottom:16px;">
            <textarea id="create-group-description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" style="width:100%; padding:12px; background:var(--surface-color); border:1px solid var(--border-color); border-radius:12px; color:var(--text-primary); margin-bottom:16px;"></textarea>
            <div style="display:flex; gap:12px; margin-bottom:16px;">
                <div class="privacy-btn" style="flex:1; padding:10px; background:var(--surface-color); border:1px solid var(--border-color); border-radius:12px; text-align:center; cursor:pointer;" onclick="selectCreatePrivacy('public')">–ü—É–±–ª–∏—á–Ω—ã–π</div>
                <div class="privacy-btn" style="flex:1; padding:10px; background:var(--surface-color); border:1px solid var(--border-color); border-radius:12px; text-align:center; cursor:pointer;" onclick="selectCreatePrivacy('private')">–ü—Ä–∏–≤–∞—Ç–Ω—ã–π</div>
            </div>
            <div id="create-group-link-container" style="display:none; margin-bottom:16px;">
                <label>–°—Å—ã–ª–∫–∞-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</label>
                <div style="display:flex; gap:8px;">
                    <input type="text" id="create-group-link" readonly style="flex:1; padding:12px; background:var(--surface-color); border:1px solid var(--border-color); border-radius:12px; color:var(--text-primary);">
                    <button onclick="copyGroupLink()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
            <div id="group-permissions" style="display: block;">
                <h3>–†–∞–∑—Ä–µ—à–µ–Ω–∏—è</h3>
                <label><input type="checkbox" id="perm-send-msg" checked> –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</label><br>
                <label><input type="checkbox" id="perm-send-media" checked> –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞</label><br>
                <label><input type="checkbox" id="perm-add-members" checked> –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</label><br>
                <label><input type="checkbox" id="perm-pin" checked> –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π</label>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–≥—Ä—É–ø–ø–∞/–∫–∞–Ω–∞–ª) -->
    <div id="profile-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideProfile()">‚Üê</button>
            <h1 id="profile-title">–ü—Ä–æ—Ñ–∏–ª—å</h1>
            <button class="edit-btn" id="profile-edit-btn" style="display: none;" onclick="editProfile()">‚úèÔ∏è</button>
        </div>
        <div style="flex:1; overflow-y: auto;" id="profile-content"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
    <div id="profile-edit-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideProfileEdit()">‚Üê</button>
            <h1>–ò–∑–º–µ–Ω–∏—Ç—å</h1>
            <button class="next-btn" onclick="saveProfileEdit()">üíæ</button>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;" id="profile-edit-content"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–∞–ø–æ–∫ -->
    <div id="folders-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideFolders()">‚Üê</button>
            <h1>–ü–∞–ø–∫–∏</h1>
            <button class="create-btn" onclick="showCreateFolder()">‚ûï</button>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;" id="folders-list"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–∫–∏ -->
    <div id="create-folder-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideCreateFolder()">‚Üê</button>
            <h1>–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É</h1>
            <button class="next-btn" onclick="createFolderFinal()">‚úÖ</button>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;">
            <input type="text" id="folder-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏" style="width:100%; padding:12px; background:var(--surface-color); border:1px solid var(--border-color); border-radius:12px; color:var(--text-primary); margin-bottom:16px;">
            <h3>–¶–≤–µ—Ç –º–µ—Ç–∫–∏</h3>
            <div class="color-picker" id="folder-color-picker">
                <div class="color-option black" onclick="selectFolderColor('black')"></div>
                <div class="color-option white" onclick="selectFolderColor('white')"></div>
                <div class="color-option yellow" onclick="selectFolderColor('yellow')"></div>
                <div class="color-option red" onclick="selectFolderColor('red')"></div>
                <div class="color-option blue" onclick="selectFolderColor('blue')"></div>
                <div class="color-option green" onclick="selectFolderColor('green')"></div>
                <div class="color-option orange" onclick="selectFolderColor('orange')"></div>
            </div>
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç—ã</h3>
            <div id="folder-chat-select" style="max-height:300px; overflow-y:auto;"></div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞–ø–∫–∏ -->
    <div id="folder-detail-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideFolderDetail()">‚Üê</button>
            <h1 id="folder-detail-title"></h1>
            <button class="edit-btn" onclick="editFolder()">–ò–∑–º.</button>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;" id="folder-chats-list"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ç–µ–º -->
    <div id="themes-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideThemes()">‚Üê</button>
            <h1>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h1>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;">
            <h3>–¢–µ–º–∞</h3>
            <div class="theme-option" onclick="selectTheme('dark')">–¢—ë–º–Ω–∞—è</div>
            <div class="theme-option" onclick="selectTheme('light')">–°–≤–µ—Ç–ª–∞—è</div>
            <div class="theme-option" onclick="selectTheme('blue')">–°–∏–Ω—è—è</div>
            <div class="theme-option" onclick="selectTheme('green')">–ó–µ–ª—ë–Ω–∞—è</div>
            <div class="theme-option" onclick="selectTheme('purple')">–§–∏–æ–ª–µ—Ç–æ–≤–∞—è</div>
            <h3>–û–±–æ–∏ —á–∞—Ç–∞</h3>
            <div class="theme-option" onclick="selectWallpaper('default')">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</div>
            <div class="theme-option" onclick="selectWallpaper('light')">–°–≤–µ—Ç–ª—ã–µ</div>
            <div class="theme-option" onclick="selectWallpaper('dark')">–¢—ë–º–Ω—ã–µ</div>
            <div class="theme-option" onclick="selectWallpaper('gradient')">–ì—Ä–∞–¥–∏–µ–Ω—Ç</div>
            <div class="theme-option" onclick="selectWallpaper('pattern')">–£–∑–æ—Ä</div>
            <h3>–†–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
            <div class="theme-option" onclick="setDesktopMode(true)">–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è</div>
            <div class="theme-option" onclick="setDesktopMode(false)">–¢–µ–ª–µ—Ñ–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è</div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ -->
    <div id="privacy-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hidePrivacy()">‚Üê</button>
            <h1>–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</h1>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;">
            <div class="privacy-item" onclick="cyclePrivacy('phone')">
                <span>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</span>
                <span class="privacy-value" id="privacy-phone">–í—Å–µ</span>
            </div>
            <div class="privacy-item" onclick="cyclePrivacy('lastSeen')">
                <span>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</span>
                <span class="privacy-value" id="privacy-lastSeen">–í—Å–µ</span>
            </div>
            <div class="privacy-item" onclick="cyclePrivacy('photo')">
                <span>–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è</span>
                <span class="privacy-value" id="privacy-photo">–í—Å–µ</span>
            </div>
            <div class="privacy-item" onclick="cyclePrivacy('status')">
                <span>–°—Ç–∞—Ç—É—Å</span>
                <span class="privacy-value" id="privacy-status">–í—Å–µ</span>
            </div>
            <div class="privacy-item" onclick="cyclePrivacy('groups')">
                <span>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—ã</span>
                <span class="privacy-value" id="privacy-groups">–í—Å–µ</span>
            </div>
            <div class="privacy-item" onclick="cyclePrivacy('calls')">
                <span>–ó–≤–æ–Ω–∫–∏</span>
                <span class="privacy-value" id="privacy-calls">–í—Å–µ</span>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <div id="devices-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideDevices()">‚Üê</button>
            <h1>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h1>
            <button class="edit-btn" onclick="terminateOtherSessions()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ –¥—Ä—É–≥–∏–µ —Å–µ–∞–Ω—Å—ã</button>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;" id="devices-list"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —è–∑—ã–∫–∞ -->
    <div id="language-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideLanguage()">‚Üê</button>
            <h1>–Ø–∑—ã–∫</h1>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px;">
            <div class="lang-option" onclick="selectLanguage('ru')">–†—É—Å—Å–∫–∏–π</div>
            <div class="lang-option" onclick="selectLanguage('en')">English</div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω "–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏" -->
    <div id="about-screen" class="screen">
        <div class="top-bar">
            <button class="back-btn" onclick="hideAbout()">‚Üê</button>
            <h1>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h1>
        </div>
        <div style="flex:1; overflow-y: auto; padding:16px; text-align:center;">
            <p>Zhuravlev Telegram Clone v10.5</p>
            <p>–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 01.03.2026</p>
            <p>–ê–≤—Ç–æ—Ä: –ú–∏—Ö–∞–∏–ª –ñ—É—Ä–∞–≤–ª–µ–≤</p>
            <p>–ê–∫–∫–∞—É–Ω—Ç–æ–≤: <span id="account-count">1</span></p>
        </div>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —á–∞—Ç–æ–≤ (–ü–ö) -->
    <div id="recent-chats-sidebar" style="display: none;"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal" id="modal">
            <div class="modal-title" id="modal-title"></div>
            <div class="modal-content" id="modal-content"></div>
            <input type="text" class="modal-input" id="modal-input" style="display:none;">
            <div class="modal-buttons" id="modal-buttons"></div>
        </div>
    </div>
</div>

<script>
    // ==================== –ì–õ–û–ë–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï ====================
    let appState = {
        accounts: JSON.parse(localStorage.getItem('accounts')) || [],
        currentAccount: null,
        theme: localStorage.getItem('theme') || 'dark',
        wallpaper: localStorage.getItem('wallpaper') || 'default',
        desktopMode: localStorage.getItem('desktopMode') === 'true' ? true : (window.innerWidth >= 768),
        language: localStorage.getItem('language') || 'ru',
        privacy: JSON.parse(localStorage.getItem('privacy')) || {
            phone: 'everyone', lastSeen: 'everyone', photo: 'everyone',
            status: 'everyone', groups: 'everyone', calls: 'everyone'
        },
        folders: JSON.parse(localStorage.getItem('folders')) || [],
        chats: JSON.parse(localStorage.getItem('chats')) || [],
        users: JSON.parse(localStorage.getItem('users')) || [
            { id: 'user1', name: '–ê–Ω—Ç–æ–Ω', username: 'anton', avatar: 'A', lastSeen: Date.now() - 3600000, online: false, phone: '+7 900 111-22-33', birthday: '1990-01-01' },
            { id: 'user2', name: '–ú–∞—Ä–∏—è', username: 'maria', avatar: 'M', lastSeen: Date.now() - 7200000, online: false, phone: '+7 900 222-33-44', birthday: '1992-02-02' },
            { id: 'user3', name: '–ò–≤–∞–Ω', username: 'ivan', avatar: '–ò', lastSeen: Date.now() - 1800000, online: true, phone: '+7 900 333-44-55', birthday: '1988-03-03' },
            { id: 'user4', name: '–ï–ª–µ–Ω–∞', username: 'elena', avatar: '–ï', lastSeen: Date.now() - 86400000, online: false, phone: '+7 900 444-55-66', birthday: '1995-04-04' },
            { id: 'user5', name: '–ü—ë—Ç—Ä', username: 'petr', avatar: '–ü', lastSeen: Date.now() - 300000, online: true, phone: '+7 900 555-66-77', birthday: '1985-05-05' },
            { id: 'bot', name: 'Zhuravlev Bot', username: 'bot', avatar: 'ü§ñ', lastSeen: Date.now() - 100000, online: true, phone: '' }
        ],
        messages: JSON.parse(localStorage.getItem('messages')) || {},
        localNames: JSON.parse(localStorage.getItem('localNames')) || {},
        me: null,
        currentChatId: null,
        editMode: false,
        selectedChats: [],
        contextMessage: null,
        groupType: 'group',
        groupPrivacy: 'public',
        groupAvatar: 'üì∑',
        groupName: '',
        groupDescription: '',
        groupLink: '',
        selectedParticipants: [],
        createStep: 1,
        currentProfileUserId: null,
        currentProfileChatId: null,
        currentFolderId: null,
        folderColor: 'black',
        activeFolderId: 'all',
        isMobile: window.innerWidth < 768,
        searchResults: [],
        recentChats: [],
        pollOptions: ['', ''],
        pollMultiple: false,
        pollQuiz: false,
        socket: null,
        notificationPermission: false,
        chatNotifications: JSON.parse(localStorage.getItem('chatNotifications')) || {}
    };

    // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
    document.addEventListener('DOMContentLoaded', () => {
        applyThemeAndWallpaper();
        if (appState.accounts.length > 0) {
            // –ï—Å–ª–∏ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é (–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏)
            // –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–∞–¥–æ –ª–∏–±–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ö–æ–¥–∏—Ç—å –ø–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏–º, –ª–∏–±–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞
            // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
            document.getElementById('auth-screen').classList.add('active');
        } else {
            document.getElementById('auth-screen').classList.add('active');
        }
        renderFoldersRow();
        requestNotificationPermission();
        connectSocket();
        window.addEventListener('resize', () => {
            appState.isMobile = window.innerWidth < 768;
            document.body.classList.toggle('pc-mode', appState.desktopMode && !appState.isMobile);
            document.body.classList.toggle('mobile-mode', !appState.desktopMode || appState.isMobile);
            updateRecentChats();
        });
    });

    // ==================== –°–û–ö–ï–¢ ====================
    function connectSocket() {
        if (appState.socket) return;
        appState.socket = io({ auth: { token: localStorage.getItem('token') } });
        appState.socket.on('newMessage', (msg) => {
            if (!appState.messages[msg.chatId]) appState.messages[msg.chatId] = [];
            appState.messages[msg.chatId].push(msg);
            if (appState.currentChatId === msg.chatId) {
                if (appState.desktopMode && !appState.isMobile) renderMessagesPC(msg.chatId);
                else renderMessages(msg.chatId);
            } else {
                // –û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
                const chat = appState.chats.find(c => c.id === msg.chatId);
                if (chat) {
                    chat.lastMessage = msg.content.length > 30 ? msg.content.slice(0,30)+'‚Ä¶' : msg.content;
                    chat.lastTime = msg.time;
                    renderChats();
                    // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ
                    if (appState.notificationPermission && document.hidden && !appState.chatNotifications[chat.id]) {
                        new Notification('–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ', { body: `${chat.name}: ${msg.content}` });
                    }
                }
            }
            saveState();
        });
        appState.socket.on('userTyping', ({ chatId, username, isTyping }) => {
            if (appState.currentChatId === chatId) {
                const statusEl = appState.desktopMode && !appState.isMobile ? document.getElementById('pc-chat-header-status') : document.getElementById('chat-header-status');
                statusEl.innerText = isTyping ? `${username} –ø–µ—á–∞—Ç–∞–µ—Ç...` : '–æ–Ω–ª–∞–π–Ω';
            }
        });
    }

    // ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====================
    function requestNotificationPermission() {
        if (!('Notification' in window)) return;
        if (Notification.permission === 'granted') {
            appState.notificationPermission = true;
        } else if (Notification.permission !== 'denied') {
            Notification.requestPermission().then(perm => {
                appState.notificationPermission = perm === 'granted';
            });
        }
    }

    function toggleChatNotification(chatId) {
        appState.chatNotifications[chatId] = !appState.chatNotifications[chatId];
        localStorage.setItem('chatNotifications', JSON.stringify(appState.chatNotifications));
    }

    // ==================== –®–ò–§–†–û–í–ê–ù–ò–ï (—ç–º—É–ª—è—Ü–∏—è) ====================
    function encryptMessage(text) {
        // –ü—Ä–æ—Å—Ç–æ–µ —Å–º–µ—â–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        return text.split('').map(c => String.fromCharCode(c.charCodeAt(0) + 1)).join('');
    }
    function decryptMessage(encrypted) {
        return encrypted.split('').map(c => String.fromCharCode(c.charCodeAt(0) - 1)).join('');
    }

    // ==================== –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø ====================
    function showRegisterForm() { /* ... */ }
    function showLoginForm() { /* ... */ }
    function showAuthButtons() { /* ... */ }
    function register() { /* ... */ }
    function login() { /* ... */ }

    // ==================== –ù–ê–í–ò–ì–ê–¶–ò–Ø ====================
    // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö, –Ω–æ —Å –¥–æ—Ä–∞–±–æ—Ç–∫–∞–º–∏)
</script>
</body>
</html>
